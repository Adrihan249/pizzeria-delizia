<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <title>Acceso - Pizzería</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      background: url('https://images.unsplash.com/photo-1600891963935-c6cae3ab8c60') no-repeat center center fixed;
      background-size: cover;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    .card {
      width: 100%;
      max-width: 420px;
      padding: 30px;
      border: none;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(5px);
      animation: fadeIn 0.7s ease-in-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    h2 {
      font-weight: 700;
      text-align: center;
      color: #b33c00;
      margin-bottom: 1rem;
    }

    .btn-pizza {
      background-color: #ff5e3a;
      color: white;
      font-weight: 600;
      border: none;
      transition: 0.3s ease;
    }

    .btn-pizza:hover {
      background-color: #e64a26;
    }

    .btn-register {
      background-color: #2ecc71;
      border: none;
      color: white;
      font-weight: 600;
    }

    .btn-register:hover {
      background-color: #27ae60;
    }

    .toggle-link {
      color: #b33c00;
      cursor: pointer;
      text-decoration: underline;
      font-weight: 500;
    }

    .toggle-link:hover {
      color: #ff5e3a;
    }

    .alert {
      border-radius: 10px;
      font-size: 0.95rem;
    }

    .form-control:focus {
      border-color: #ff5e3a;
      box-shadow: 0 0 0 0.2rem rgba(255, 94, 58, 0.3);
    }
  </style>
</head>

<body>
  <div class="card">
   {% with messages = get_flashed_messages(category_filter=['auth']) %}

    {% if messages %}
    <div class="alert alert-warning text-center">
      {% for message in messages %}
      {{ message }}
      {% endfor %}
    </div>
    {% endif %}
    {% endwith %}

    <!-- Login Form -->
    <div id="login-form">
      <h2>Bienvenido a Pizzería Delizia 🍕</h2>
      <form method="POST">
        <input type="hidden" name="login">
        <div class="mb-3">
          <label for="username" class="form-label">Usuario</label>
          <input type="text" class="form-control" id="username" name="username" placeholder="Tu nombre de usuario" required>
        </div>
        <div class="mb-3">
          <label for="password" class="form-label">Contraseña</label>
          <input type="password" class="form-control" id="password" name="password" placeholder="Tu contraseña" required>
        </div>
        <button type="submit" class="btn btn-pizza w-100 mb-3">Ingresar</button>
      </form>
      <p class="text-center">¿No tienes cuenta? <span class="toggle-link" onclick="toggleForms()">Regístrate aquí</span></p>
    </div>

    <!-- Register Form -->
    <div id="register-form" style="display: none;">
      <h2>Crea tu cuenta 🍕</h2>
      <form method="POST">
        <input type="hidden" name="register">
        <div class="mb-3">
          <label for="new_username" class="form-label">Nombre de usuario</label>
          <input type="text" class="form-control" id="new_username" name="new_username" placeholder="Elige un nombre" required>
        </div>
        <div class="mb-3">
          <label for="new_password" class="form-label">Contraseña</label>
          <input type="password" class="form-control" id="new_password" name="new_password" placeholder="Crea una contraseña" required>
        </div>
        <button type="submit" class="btn btn-register w-100 mb-3">Registrar</button>
      </form>
      <p class="text-center">¿Ya tienes cuenta? <span class="toggle-link" onclick="toggleForms()">Inicia sesión</span></p>
    </div>
  </div>

  <script>
    function toggleForms() {
      const login = document.getElementById('login-form');
      const register = document.getElementById('register-form');
      login.style.display = (login.style.display === 'none') ? 'block' : 'none';
      register.style.display = (register.style.display === 'none') ? 'block' : 'none';
    }
  </script>
</body>

</html>
